<div class="w-full px-6 py-6 mx-auto">
    <!-- Quick Stats -->
    <div class="flex flex-wrap -mx-3">
        <!-- Water Production -->
        <div class="w-full max-w-full px-3 mb-6 sm:w-1/2 sm:flex-none xl:mb-0 xl:w-1/4">
            <div class="relative flex flex-col min-w-0 break-words bg-white shadow hover:shadow-md transition-all duration-300 rounded-xl overflow-hidden">
                <div class="flex-auto p-4">
                    <div class="flex flex-row items-center">
                        <div class="flex-none w-14 h-14 bg-blue-50 rounded-xl flex items-center justify-center">
                            <i class="fas fa-tint text-2xl text-blue-500"></i>
                        </div>
                        <div class="flex-1 ml-4">
                            <p class="mb-1 font-sans text-sm font-medium text-gray-500">Produksi Air</p>
                            <h4 class="mb-0 font-bold text-gray-800 text-xl">528.941 mÂ³</h4>
                            <span class="text-xs text-blue-600 font-medium flex items-center mt-1">
                                <i class="fas fa-arrow-up mr-1"></i> +5.2% hari ini
                            </span>
                        </div>
                    </div>
                </div>
                <div class="h-1 bg-blue-100"></div>
            </div>
        </div>

        <!-- Active Customers -->
        <div class="w-full max-w-full px-3 mb-6 sm:w-1/2 sm:flex-none xl:mb-0 xl:w-1/4">
            <div class="relative flex flex-col min-w-0 break-words bg-white shadow hover:shadow-md transition-all duration-300 rounded-xl overflow-hidden">
                <div class="flex-auto p-4">
                    <div class="flex flex-row items-center">
                        <div class="flex-none w-14 h-14 bg-teal-50 rounded-xl flex items-center justify-center">
                            <i class="fas fa-users text-2xl text-teal-500"></i>
                        </div>
                        <div class="flex-1 ml-4">
                            <p class="mb-1 font-sans text-sm font-medium text-gray-500">Pelanggan Aktif</p>
                            <h4 class="mb-0 font-bold text-gray-800 text-xl">124.892</h4>
                            <span class="text-xs text-teal-600 font-medium flex items-center mt-1">
                                <i class="fas fa-arrow-up mr-1"></i> 98.2% dari total
                            </span>
                        </div>
                    </div>
                </div>
                <div class="h-1 bg-teal-100"></div>
            </div>
        </div>

        <!-- Distribution Loss -->
        <div class="w-full max-w-full px-3 mb-6 sm:w-1/2 sm:flex-none xl:mb-0 xl:w-1/4">
            <div class="relative flex flex-col min-w-0 break-words bg-white shadow hover:shadow-md transition-all duration-300 rounded-xl overflow-hidden">
                <div class="flex-auto p-4">
                    <div class="flex flex-row items-center">
                        <div class="flex-none w-14 h-14 bg-amber-50 rounded-xl flex items-center justify-center">
                            <i class="fas fa-droplet-slash text-2xl text-amber-500"></i>
                        </div>
                        <div class="flex-1 ml-4">
                            <p class="mb-1 font-sans text-sm font-medium text-gray-500">Kehilangan Air</p>
                            <h4 class="mb-0 font-bold text-gray-800 text-xl">23.4%</h4>
                            <span class="text-xs text-amber-600 font-medium flex items-center mt-1">
                                <i class="fas fa-arrow-down mr-1"></i> -2.4% dari bulan lalu
                            </span>
                        </div>
                    </div>
                </div>
                <div class="h-1 bg-amber-100"></div>
            </div>
        </div>

        <!-- Revenue -->
        <div class="w-full max-w-full px-3 mb-6 sm:w-1/2 sm:flex-none xl:mb-0 xl:w-1/4">
            <div class="relative flex flex-col min-w-0 break-words bg-white shadow hover:shadow-md transition-all duration-300 rounded-xl overflow-hidden">
                <div class="flex-auto p-4">
                    <div class="flex flex-row items-center">
                        <div class="flex-none w-14 h-14 bg-indigo-50 rounded-xl flex items-center justify-center">
                            <i class="fas fa-money-bill-wave text-2xl text-indigo-500"></i>
                        </div>
                        <div class="flex-1 ml-4">
                            <p class="mb-1 font-sans text-sm font-medium text-gray-500">Pendapatan</p>
                            <h4 class="mb-0 font-bold text-gray-800 text-xl">Rp 8.2M</h4>
                            <span class="text-xs text-indigo-600 font-medium flex items-center mt-1">
                                <i class="fas fa-arrow-up mr-1"></i> +12% MTD
                            </span>
                        </div>
                    </div>
                </div>
                <div class="h-1 bg-indigo-100"></div>
            </div>
        </div>
    </div>

    <!-- Charts Section -->
    <div class="flex flex-wrap mt-6 -mx-3">
        <!-- Water Distribution Chart -->
        <div class="w-full max-w-full px-3 mt-0 lg:w-8/12">
            <div class="relative flex flex-col min-w-0 break-words bg-white shadow hover:shadow-md transition-all duration-300 rounded-xl overflow-hidden">
                <div class="border-b border-gray-100 p-6">
                    <div class="flex flex-wrap items-center">
                        <div class="flex-1">
                            <h6 class="text-lg font-medium text-gray-800">Distribusi Air per Wilayah</h6>
                            <p class="text-sm text-gray-500 mt-1">Monitoring real-time distribusi air</p>
                        </div>
                        <div class="flex-none">
                            <div class="flex items-center gap-2">
                                <button class="inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-gray-50 hover:bg-gray-100 rounded-lg transition-all">
                                    <i class="fas fa-filter mr-2 text-gray-500"></i> Filter
                                </button>
                                <button class="inline-flex items-center px-3 py-2 text-sm font-medium text-blue-600 bg-blue-50 hover:bg-blue-100 rounded-lg transition-all">
                                    <i class="fas fa-download mr-2 text-blue-500"></i> Export
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex-auto p-6 pt-0">
                    <div class="relative pt-6">
                        <div class="flex items-center justify-between mb-4 px-1">
                            <div class="space-x-2">
                                <span class="inline-block px-3 py-1 text-xs font-medium bg-blue-50 text-blue-600 rounded-full cursor-pointer hover:bg-blue-100 transition-all">Hari</span>
                                <span class="inline-block px-3 py-1 text-xs font-medium bg-gray-50 text-gray-600 rounded-full cursor-pointer hover:bg-gray-100 transition-all">Minggu</span>
                                <span class="inline-block px-3 py-1 text-xs font-medium bg-gray-50 text-gray-600 rounded-full cursor-pointer hover:bg-gray-100 transition-all">Bulan</span>
                            </div>
                            <div class="text-sm text-gray-500">
                                Update terakhir: <span class="font-medium text-gray-700">10:45 WIB</span>
                            </div>
                        </div>
                        <div id="water-distribution-chart" style="height: 350px;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="w-full max-w-full px-3 lg:w-4/12">
            <div class="relative flex flex-col h-full min-w-0 break-words bg-white shadow hover:shadow-md transition-all duration-300 rounded-xl">
                <div class="p-6">
                    <h6 class="text-lg font-medium text-gray-800 mb-4">Quick Actions</h6>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <button class="p-4 text-center rounded-xl bg-gray-50 hover:bg-gray-100 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 group">
                            <i class="fas fa-file-invoice text-2xl text-gray-500 group-hover:text-blue-600 transition-colors mb-2"></i>
                            <p class="text-sm font-medium text-gray-700">Buat Tagihan</p>
                        </button>
                        <button class="p-4 text-center rounded-xl bg-gray-50 hover:bg-gray-100 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 group">
                            <i class="fas fa-user-plus text-2xl text-gray-500 group-hover:text-teal-600 transition-colors mb-2"></i>
                            <p class="text-sm font-medium text-gray-700">Pelanggan Baru</p>
                        </button>
                        <button class="p-4 text-center rounded-xl bg-gray-50 hover:bg-gray-100 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 group">
                            <i class="fas fa-wrench text-2xl text-gray-500 group-hover:text-amber-600 transition-colors mb-2"></i>
                            <p class="text-sm font-medium text-gray-700">Maintenance</p>
                        </button>
                        <button class="p-4 text-center rounded-xl bg-gray-50 hover:bg-gray-100 hover:scale-[1.02] active:scale-[0.98] transition-all duration-200 group">
                            <i class="fas fa-triangle-exclamation text-2xl text-gray-500 group-hover:text-red-600 transition-colors mb-2"></i>
                            <p class="text-sm font-medium text-gray-700">Lapor Masalah</p>
                        </button>
                    </div>

                    <!-- Active Issues -->
                    <div class="mt-6">
                        <div class="flex items-center justify-between mb-3">
                            <h6 class="text-sm font-medium text-gray-800">Masalah Aktif</h6>
                            <span class="inline-flex items-center justify-center w-6 h-6 rounded-full bg-red-50 text-red-600 text-xs font-semibold">3</span>
                        </div>
                        <div class="space-y-3">
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-all cursor-pointer">
                                <i class="fas fa-exclamation-circle text-red-500 mr-3"></i>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-800">Kebocoran Pipa Utama</p>
                                    <p class="text-xs text-gray-500 mt-0.5">Jl. Sudirman No. 123</p>
                                </div>
                                <span class="px-2 py-1 text-xs font-medium bg-red-50 text-red-600 rounded-full">High</span>
                            </div>
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-all cursor-pointer">
                                <i class="fas fa-exclamation-triangle text-amber-500 mr-3"></i>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-800">Tekanan Air Rendah</p>
                                    <p class="text-xs text-gray-500 mt-0.5">Wilayah Timur</p>
                                </div>
                                <span class="px-2 py-1 text-xs font-medium bg-amber-50 text-amber-600 rounded-full">Medium</span>
                            </div>
                            <div class="flex items-center p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-all cursor-pointer">
                                <i class="fas fa-info-circle text-blue-500 mr-3"></i>
                                <div class="flex-1">
                                    <p class="text-sm font-medium text-gray-800">Pemeliharaan Terjadwal</p>
                                    <p class="text-xs text-gray-500 mt-0.5">Pipa Distribusi Barat</p>
                                </div>
                                <span class="px-2 py-1 text-xs font-medium bg-blue-50 text-blue-600 rounded-full">Low</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Recent Activities -->
    <div class="flex flex-wrap mt-6 -mx-3">
        <div class="w-full max-w-full px-3">
            <div class="relative flex flex-col min-w-0 break-words bg-white shadow hover:shadow-md transition-all duration-300 rounded-xl overflow-hidden">
                <div class="p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h6 class="text-lg font-medium text-gray-800">Aktivitas Terkini</h6>
                        <button class="text-sm text-blue-600 hover:text-blue-700 transition-colors flex items-center">
                            Lihat Semua
                            <i class="fas fa-arrow-right ml-1 text-xs"></i>
                        </button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 text-left border-b border-gray-100">Waktu</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 text-left border-b border-gray-100">Aktivitas</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 text-left border-b border-gray-100">Lokasi</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 text-left border-b border-gray-100">Status</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 text-left border-b border-gray-100">Petugas</th>
                                    <th class="px-6 py-3 text-xs font-medium text-gray-500 text-left border-b border-gray-100">Aksi</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="px-6 py-4 text-sm text-gray-600">09:41 WIB</td>
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <span class="w-2 h-2 rounded-full bg-teal-400 mr-2"></span>
                                            <span class="text-sm text-gray-700">Pemasangan Meter Baru</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-600">Jl. Merdeka No. 45</td>
                                    <td class="px-6 py-4">
                                        <span class="px-2 py-1 text-xs font-medium bg-teal-50 text-teal-700 rounded-full">Completed</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-600">Ahmad Sudrajat</td>
                                    <td class="px-6 py-4">
                                        <button class="text-gray-400 hover:text-blue-600 transition-colors">
                                            <i class="fas fa-ellipsis-vertical"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="px-6 py-4 text-sm text-gray-600">09:15 WIB</td>
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <span class="w-2 h-2 rounded-full bg-amber-400 mr-2"></span>
                                            <span class="text-sm text-gray-700">Perbaikan Kebocoran</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-600">Jl. Asia Afrika No. 88</td>
                                    <td class="px-6 py-4">
                                        <span class="px-2 py-1 text-xs font-medium bg-amber-50 text-amber-700 rounded-full">In Progress</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-600">Budi Santoso</td>
                                    <td class="px-6 py-4">
                                        <button class="text-gray-400 hover:text-blue-600 transition-colors">
                                            <i class="fas fa-ellipsis-vertical"></i>
                                        </button>
                                    </td>
                                </tr>
                                <tr class="hover:bg-gray-50 transition-colors">
                                    <td class="px-6 py-4 text-sm text-gray-600">08:50 WIB</td>
                                    <td class="px-6 py-4">
                                        <div class="flex items-center">
                                            <span class="w-2 h-2 rounded-full bg-blue-400 mr-2"></span>
                                            <span class="text-sm text-gray-700">Pemeriksaan Kualitas Air</span>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-600">Reservoir Utama</td>
                                    <td class="px-6 py-4">
                                        <span class="px-2 py-1 text-xs font-medium bg-blue-50 text-blue-700 rounded-full">Scheduled</span>
                                    </td>
                                    <td class="px-6 py-4 text-sm text-gray-600">Dewi Lestari</td>
                                    <td class="px-6 py-4">
                                        <button class="text-gray-400 hover:text-blue-600 transition-colors">
                                            <i class="fas fa-ellipsis-vertical"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@push('scripts')
<script defer>
    // Tunggu sampai dokumen sepenuhnya dimuat
    window.addEventListener('load', function() {
        var options = {
            series: [{
                name: 'Distribusi Air',
                data: [31, 40, 28, 51, 42, 109, 100]
            }],
            chart: {
                height: 350,
                type: 'area',
                toolbar: {
                    show: false
                },
                fontFamily: 'inherit',
                animations: {
                    enabled: true,
                    easing: 'easeinout',
                    speed: 800,
                }
            },
            colors: ['#3b82f6'],
            fill: {
                type: 'gradient',
                gradient: {
                    shadeIntensity: 0.3,
                    opacityFrom: 0.4,
                    opacityTo: 0.1,
                }
            },
            dataLabels: {
                enabled: false
            },
            stroke: {
                curve: 'smooth',
                width: 2
            },
            xaxis: {
                categories: ["Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu", "Minggu"],
                labels: {
                    style: {
                        colors: '#64748b',
                        fontSize: '12px',
                        fontFamily: 'inherit',
                        fontWeight: 400,
                    }
                },
                axisBorder: {
                    show: false
                },
                axisTicks: {
                    show: false
                }
            },
            yaxis: {
                labels: {
                    style: {
                        colors: '#64748b',
                        fontSize: '12px',
                        fontFamily: 'inherit',
                        fontWeight: 400,
                    },
                    formatter: function (value) {
                        return value + " mÂ³";
                    }
                }
            },
            tooltip: {
                theme: 'light',
                x: {
                    format: 'dd/MM/yy HH:mm'
                },
                y: {
                    formatter: function (value) {
                        return value + " mÂ³";
                    }
                },
                marker: {
                    show: false
                }
            },
            grid: {
                borderColor: '#e2e8f0',
                strokeDashArray: 4,
                yaxis: {
                    lines: {
                        show: true
                    }
                },
                xaxis: {
                    lines: {
                        show: false
                    }
                },
                padding: {
                    top: 0,
                    right: 0,
                    bottom: 0,
                    left: 10
                }
            },
            markers: {
                size: 5,
                colors: ['#3b82f6'],
                strokeColors: '#ffffff',
                strokeWidth: 2,
                hover: {
                    size: 7,
                }
            }
        };

        try {
            var chartElement = document.querySelector("#water-distribution-chart");
            if (chartElement && typeof ApexCharts !== 'undefined') {
                var chart = new ApexCharts(chartElement, options);
                chart.render();
            } else {
                console.error("Chart element not found or ApexCharts not loaded");
            }
        } catch (error) {
            console.error("Error initializing chart:", error);
        }
    });
</script>
@endpush